# AI Chat System

Created by: Erick Nolasco
Created time: December 25, 2025 10:23 PM
Last edited by: Erick Nolasco
Last updated time: January 5, 2026 9:08 AM
Doc Type: Feature Spec
Key Info: AI chat integration: context system, 5 integration patterns, usage limits
Phase: Core Features
Priority: High

**Philosophy:** Structured tasks (main journey) + Flexible chat (support) = Best of both

---

## Where Chat Lives

**Access:** Fixed chat button (üí¨) bottom-right, always visible

**Layout:**

- **Desktop:** Slides in from right (400px panel)
- **Mobile:** Expands to full-screen
- **States:** Collapsed | Expanded | Minimized with badge

**Interface:**

- Header: "AI Assistant" + context ("Helping with: [Task Name]")
- Messages: User (blue, right) vs AI (gray, left)
- Input: "Ask me anything..." + send button
- Suggested questions: 3-4 chips above input (context-aware)

---

## Context Awareness

### What AI Knows

| Context              | Example                                                         |
| -------------------- | --------------------------------------------------------------- |
| **Onboarding data**  | Business type: SaaS, State: CA, Stage: Idea, Funding: Bootstrap |
| **Current activity** | Task: "Select legal entity", Screen: Step 2 of 4                |
| **Progress**         | 47% confidence, Phase 2: 33% complete (4/12 tasks)              |
| **Decisions made**   | Entity: LLC, Business name: TaskFlow, Model: Subscription       |
| **Incomplete tasks** | Skipped: 2, Blocked: 5, Deadlines approaching: 1                |

### System Prompt Structure

```

```

You are the AI Assistant for Business Navigator, helping [Name] launch [Business Name].

User Context:

- Business: {business_name}, a {business_type} in {state}
- Entity type: {entity_type}
- Stage: {stage}
- Current task: {current_task_name} (Phase {phase}, Step {step})
- Progress: {confidence_score}% confidence, {tasks_completed}/{tasks_total} tasks complete

Key decisions made:

{decisions_list}

Your role:

- Answer questions about their specific business situation
- Provide actionable, personalized advice
- Reference their decisions when relevant ("Since you chose an LLC...")
- Help them complete the current task if they're stuck
- Be encouraging and celebrate progress
- Don't contradict structured task content (be consistent)
- If you don't know state-specific details, admit it and suggest resources

Tone: Friendly mentor, not corporate consultant. Concise, actionable, encouraging.

```

```

```jsx
You are the AI Assistant for AI Business Navigator, helping {user_name} launch their business: {business_name}.

Context:
- Business: [Name], [Type] in [State]
- Entity: [Entity Type]
- Progress: [Score]% confidence, [X/Y] tasks complete
- Current: [Task Name] (Phase X, Step Y)

Your role:
- Answer questions about their specific business situation
- Provide actionable, personalized advice
- Reference their decisions when relevant ("Since you chose an LLC...")
- Answer questions about their specific situation
- Reference their decisions ("Since you chose LLC...")
- Help complete current task if stuck
- Be encouraging, celebrate progress
- Admit when you don't know (especially state-specific details)
Tone: Friendly mentor, concise, actionable
```

---

## Integration Patterns

| Pattern                                                               | When                         | Example                                                                    |
| --------------------------------------------------------------------- | ---------------------------- | -------------------------------------------------------------------------- |
| **1. Contextual Help**                                                | User stuck on task step      | Q: "What does venture capital mean?"                                       |
| A: Definition + personalized guidance based on their bootstrap choice |
| **2. Alternative Completion**                                         | User prefers chat over forms | Q: "Help me write my value proposition"                                    |
| A: Conversational Q&A ‚Üí saves result ‚Üí marks task complete            |
| **3. Proactive Suggestions**                                          | AI detects user hesitation   | "üí° I noticed you're on licenses. For SaaS in CA, you'll likely need..."   |
| **4. Cross-Task Insights**                                            | User asks synthesis question | Q: "How much money do I need?"                                             |
| A: Pulls from Tasks 3.4, 3.6, 3.9 ‚Üí comprehensive answer              |
| **5. Task Recommendations**                                           | User asks "what's next?"     | A: "Get your EIN from IRS (15 min, blocks 3 other tasks)" + [Start task ‚Üí] |

---

## Use Cases (By Frequency)

| Use Case                                 | %   | Example                                                       |
| ---------------------------------------- | --- | ------------------------------------------------------------- |
| **"I don't understand"**                 | 40% | Form jargon unclear ‚Üí AI explains in plain English            |
| **"What if my situation is different?"** | 25% | Edge cases outside structured flow ‚Üí AI provides alternatives |
| **"Show me an example"**                 | 15% | User wants to see "good" ‚Üí AI shows 3-5 relevant examples     |
| **"How do I actually do this?"**         | 10% | External action needed ‚Üí AI gives step-by-step walkthrough    |
| **"Check my work"**                      | 10% | User wants validation ‚Üí AI reviews against benchmarks         |

---

## Suggested Questions (Context-Aware)

**On Dashboard:**

- "What should I do next?"
- "Summarize my progress"
- "Show me upcoming deadlines"

**On Entity Selection Task:**

- "What's the difference between LLC and C-Corp?"
- "Which entity type is best for me?"
- "Can I change my entity type later?"

**On Tax Task:**

- "What taxes do LLCs pay?"
- "When are quarterly taxes due?"
- "Do I need to hire a CPA?"

**In Phase 1:**

- "How do I validate my idea?"
- "Who are my competitors?"
- "How should I price my product?"

---

## Usage Limits

| Tier        | Daily Limit          | Why                                                       |
| ----------- | -------------------- | --------------------------------------------------------- |
| **Free**    | 10 messages          | Cost control (~$0.30/conversation = $90/mo for 300 users) |
| **Starter** | 50 messages          | -                                                         |
| **Growth**  | Unlimited            | -                                                         |
| **Pro**     | Unlimited + priority | Faster response times                                     |

**When limit reached:** "Daily limit reached. Upgrade to Starter for 50 messages/day."

---

## Technical Implementation

### API Endpoint

```

```

POST /api/chat

Request: { conversationId, message, context }

Response: { conversationId, response, suggestedActions[], remainingQuestions }

```

```

### Context Payload

```json
{
  "message": "What taxes will I owe as an LLC?",
  "conversation_id": "conv_67890",
  "context": {
    /* full context object */
  }
}
```

```jsx
{
  "onboarding": { business_type, state, stage, funding },
  "current_task": { id, name, phase, step },
  "progress": { confidence_score, tasks_completed, phase_progress },
  "key_decisions": { entity_type, business_name, funding_strategy },
  "recent_tasks": [...],
  "upcoming_deadlines": [...]
}
```

### Cost Optimization

- GPT-4o-mini (~$0.0005 per message)
- Cache system prompts
- Rate limiting by tier
- Estimated: $0.10-0.20/user/month

---

## Action Buttons

AI can embed action buttons in responses:

| Action Type        | Example                      | Result              |
| ------------------ | ---------------------------- | ------------------- |
| `complete_task`    | [Mark task complete]         | Updates task status |
| `view_task`        | [View Entity Selection ‚Üí]    | Navigates to task   |
| `apply_suggestion` | [Use this value proposition] | Fills form field    |
| `external_link`    | [Open IRS website ‚Üó]        | Opens in new tab    |

Format in AI response: `[ACTION:type:parameter:Button Label]`

---

## Guardrails

### What Chat CAN'T Do

- Provide specific legal/tax advice ‚Üí "Consult a [lawyer/CPA]"
- Access external accounts ([IRS.gov](http://IRS.gov), banks)
- Make final decisions without user approval
- Guarantee accuracy for state laws ‚Üí Cite sources, encourage verification

### Safety

- Disclaimers on legal/financial topics
- "AI-generated" labels on documents
- Escalation path to human experts
- No PII in logs

---

## Analytics

**Track:**

- Messages per user (daily, weekly)
- Most common questions (by task, by phase)
- Satisfaction (üëç/üëé on responses)
- Action button clicks
- Tasks completed via chat vs UI

**Improve:**

- If many users ask same question ‚Üí improve task instructions
- If AI frequently wrong ‚Üí improve system prompt
- If users abandon after chat ‚Üí simplify task
- If chat used more than UI ‚Üí improve form UX
